
<hr />
<p>layout: post
title: Lab 1-1 Network Configuration
categories: openstack-install
—</p>

<p>We followed, abridged, and skipped around the guide laid out at: <a href="http://docs.openstack.org/developer/openstack-ansible/install-guide/index.html">http://docs.openstack.org/developer/openstack-ansible/install-guide/index.html</a></p>

<h2 id="lesson1-1-beginning">Lesson1-1 beginning</h2>

<p>First, you need to identify the allocation of the rack and servers we desire to use. We would like to keep the ip’s chosen for our elements in a contiguous range. For our case, we designed our setup as follows:</p>

<ul>
  <li>10.241.1.54 &gt; Storage/Cinder</li>
  <li>10.241.1.55 &gt; Infrastructure 1</li>
  <li>10.241.1.56 &gt; Infrastructure 2</li>
  <li>10.241.1.57 &gt; Infrastructure 3</li>
  <li>10.241.1.58 &gt; Compute Node 1</li>
  <li>10.241.1.59 &gt; Logging/HA Proxy</li>
</ul>

<p>This arrangement is the bare minimum needed for an iteration of an openstack cloud. Three(3) infrastructure nodes are required for Galera to operate in a highly available manner;otherwise, a single infrastructure node can be used. Generally speaking, Galera will operate best with an odd number of infrastructure nodes.</p>

<p>Next, we need to verify if the 10-Gigabit network interface is enabled for each node (this is needed for our servers to talk to each other) and whether or not each node has a 1 gigabit network interface for external communication. Use the following command to determine the hardware configuration for each node:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>lshw -C Network
</code></pre>
</div>

<p>Determine which interfaces match the MAC address of 10-Gigabit network interface using the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>ip a
</code></pre>
</div>

<p>The output for the previous command will give a lot more information than is needed for our purposes, but the pertinent information within will read as the following:</p>

<ul>
  <li>10.241.1.54 Storage eth1 is 10G</li>
  <li>10.241.1.56 In the Infra 2 case, the eth2 is 10-Gigabit network interface.</li>
  <li>10.241.1.58 Compute eth1 is 10G</li>
  <li>10.241.1.59 Logging/HAProxy eth1 is 10G</li>
</ul>

<p>For each node, you need to ensure that the 10-Gigabit interface is up, if it is down (note that we use eth2 for our case). Replace with the interface that corresponds to your 10g interface:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>ip link <span class="nb">set </span>dev eth2 up
</code></pre>
</div>

<p>Next, use the following command to verify the current state of the interface (up or down). It is a best practice to always verify that your work is completed even after having just recently executed a command. This is done for each node as well:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>ip a s &amp;lt;interface&amp;gt;
</code></pre>
</div>
